<div class="my-select-input styled" (click)="open()" cdk-overlay-origin
     #triggerElement
     #trigger="cdkOverlayOrigin">
  <div class="my-select-input-content">
    @if (placeholder && !hasSelectedValue) {
      <div class="my-select-placeholder">{{ placeholder }}</div>
    }

    @if (hasSelectedValue) {
      @if (customTrigger) {
        <ng-content select="MySelectTrigger"></ng-content>
      } @else {
        <div class="my-select-value-text">
          {{ triggerValue }}
        </div>
      }
    }
  </div>
  <svg xmlns="http://www.w3.org/2000/svg" class="my-select-thumb" height="24px" viewBox="0 -960 960 960" width="24px">
    <path
      d="M480-351.5q-9.76 0-19.34-4.16-9.57-4.17-16.77-11.36L263.46-547.46Q248.5-562.41 248.75-583t15.21-35.04q14.95-14.46 35.29-14.46t34.79 14.46L480-472.09l145.96-145.95q14.45-14.46 34.79-14.46t35.29 14.46Q711-603.59 711.25-583t-14.71 35.54L516.11-367.02q-7.2 7.19-16.77 11.36-9.58 4.16-19.34 4.16Z"/>
  </svg>
</div>

<ng-template cdkConnectedOverlay
             [cdkConnectedOverlayOrigin]="trigger"
             [cdkConnectedOverlayOpen]="panelOpen"
             [cdkConnectedOverlayScrollStrategy]="_getScrollStrategy()"
             [cdkConnectedOverlayWidth]="_getOverlayWidth()"
             [cdkConnectedOverlayPositions]="_positions"
             [cdkConnectedOverlayFlexibleDimensions]="true"
             [cdkConnectedOverlayHasBackdrop]="true"
             cdkConnectedOverlayLockPosition
             (detach)="close()"
             (backdropClick)="close()"
             (overlayKeydown)="_onOverlayKeydown($event)"
>
  <div class="my-select-panel-motion-container">
    <div #panel
         class="my-select-panel"
         [animate.enter]="'enter-motion'"
         [animate.leave]="'leave-motion'"
         role="listbox"
         tabindex="-1"
         [attr.id]="id + '-panel'"
         [attr.aria-multiselectable]="multiple"
         (keydown)="_onKeydown($event)"
         [ngClass]="panelClass"
    >
      <ng-content></ng-content>
    </div>
  </div>
</ng-template>
